<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>datalevin.lmdb documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Datalevin</span> <span class="project-version">0.2.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datalevin</span></div></div></li><li class="depth-2 branch"><a href="datalevin.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 current"><a href="datalevin.lmdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lmdb</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="datalevin.lmdb.html#var-ILMDB"><div class="inner"><span>ILMDB</span></div></a></li><li class="depth-2 branch"><a href="datalevin.lmdb.html#var-close"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>close</span></div></a></li><li class="depth-2 branch"><a href="datalevin.lmdb.html#var-entries"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>entries</span></div></a></li><li class="depth-2 branch"><a href="datalevin.lmdb.html#var-get-dbi"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-dbi</span></div></a></li><li class="depth-2 branch"><a href="datalevin.lmdb.html#var-get-first"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-first</span></div></a></li><li class="depth-2 branch"><a href="datalevin.lmdb.html#var-get-range"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-range</span></div></a></li><li class="depth-2 branch"><a href="datalevin.lmdb.html#var-get-some"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-some</span></div></a></li><li class="depth-2 branch"><a href="datalevin.lmdb.html#var-get-value"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-value</span></div></a></li><li class="depth-2 branch"><a href="datalevin.lmdb.html#var-open-dbi"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>open-dbi</span></div></a></li><li class="depth-2 branch"><a href="datalevin.lmdb.html#var-range-filter"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>range-filter</span></div></a></li><li class="depth-2"><a href="datalevin.lmdb.html#var-transact"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transact</span></div></a></li><li class="depth-1"><a href="datalevin.lmdb.html#var-open-lmdb"><div class="inner"><span>open-lmdb</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">datalevin.lmdb</h1><div class="doc"><div class="markdown"><p>API for Key Value Store</p></div></div><div class="public anchor" id="var-ILMDB"><h3>ILMDB</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-close"><h3>close</h3><div class="usage"><code>(close this)</code></div><div class="doc"><div class="markdown"><p>Close this LMDB env</p></div></div></div><div class="public anchor" id="var-entries"><h3>entries</h3><div class="usage"><code>(entries this dbi-name)</code></div><div class="doc"><div class="markdown"><p>Get the number of data entries in a DBI</p></div></div></div><div class="public anchor" id="var-get-dbi"><h3>get-dbi</h3><div class="usage"><code>(get-dbi this dbi-name)</code></div><div class="doc"><div class="markdown"><p>Lookup DBI (i.e. sub-db) by name</p></div></div></div><div class="public anchor" id="var-get-first"><h3>get-first</h3><div class="usage"><code>(get-first this dbi-name k-range)</code><code>(get-first this dbi-name k-range k-type)</code><code>(get-first this dbi-name k-range k-type v-type)</code><code>(get-first this dbi-name k-range k-type v-type ignore-key?)</code></div><div class="doc"><div class="markdown"><p>Return the first kv pair in the specified key range;</p>
<p><code>k-range</code> is a vector <code>[range-type k1 k2]</code>, <code>range-type</code> can be one of <code>:all</code>, <code>:at-least</code>, <code>:at-most</code>, <code>:closed</code>, <code>:closed-open</code>, <code>:greater-than</code>, <code>:less-than</code>, <code>:open</code>, <code>:open-closed</code>, plus backward variants that put a <code>-back</code> suffix to each of the above, e.g. <code>:all-back</code>;</p>
<p><code>k-type</code> and <code>v-type</code> indicate the data type, and they can be <code>:data</code> (default), <code>:long</code>, <code>:byte</code>, <code>:bytes</code>, <code>:datom</code>, or <code>:attr</code>;</p>
<p>Only the value will be returned if <code>ignore-key?</code> is <code>true</code>; If value is to be ignored, put <code>:ignore</code> as <code>v-type</code></p></div></div></div><div class="public anchor" id="var-get-range"><h3>get-range</h3><div class="usage"><code>(get-range this dbi-name k-range)</code><code>(get-range this dbi-name k-range k-type)</code><code>(get-range this dbi-name k-range k-type v-type)</code><code>(get-range this dbi-name k-range k-type v-type ignore-key?)</code></div><div class="doc"><div class="markdown"><p>Return a seq of kv pair in the specified key range;</p>
<p><code>k-range</code> is a vector <code>[range-type k1 k2]</code>, <code>range-type</code> can be one of <code>:all</code>, <code>:at-least</code>, <code>:at-most</code>, <code>:closed</code>, <code>:closed-open</code>, <code>:greater-than</code>, <code>:less-than</code>, <code>:open</code>, <code>:open-closed</code>, plus backward variants that put a <code>-back</code> suffix to each of the above, e.g. <code>:all-back</code>;</p>
<p><code>k-type</code> and <code>v-type</code> indicate the data type, and they can be <code>:data</code> (default), <code>:long</code>, <code>:byte</code>, <code>:bytes</code>, <code>:datom</code>, or <code>:attr</code>;</p>
<p>Only the value will be returned if <code>ignore-key?</code> is <code>true</code>; If value is to be ignored, put <code>:ignore</code> as <code>v-type</code></p></div></div></div><div class="public anchor" id="var-get-some"><h3>get-some</h3><div class="usage"><code>(get-some this dbi-name pred k-range)</code><code>(get-some this dbi-name pred k-range k-type)</code><code>(get-some this dbi-name pred k-range k-type v-type)</code><code>(get-some this dbi-name pred k-range k-type v-type ignore-key?)</code></div><div class="doc"><div class="markdown"><p>Return the first kv pair that has logical true value of <code>(pred x)</code>, where <code>pred</code> is a function, <code>x</code> is the <code>IMapEntry</code> fetched from the store.</p>
<p><code>k-range</code> is a vector <code>[range-type k1 k2]</code>, <code>range-type</code> can be one of <code>:all</code>, <code>:at-least</code>, <code>:at-most</code>, <code>:closed</code>, <code>:closed-open</code>, <code>:greater-than</code>, <code>:less-than</code>, <code>:open</code>, <code>:open-closed</code>, plus backward variants that put a <code>-back</code> suffix to each of the above, e.g. <code>:all-back</code>;</p>
<p><code>k-type</code> and <code>v-type</code> indicate the data type, and they can be <code>:data</code> (default), <code>:long</code>, <code>:byte</code>, <code>:bytes</code>, <code>:datom</code>, or <code>:attr</code>;</p>
<p>Only the value will be returned if <code>ignore-key?</code> is <code>true</code>; If value is to be ignored, put <code>:ignore</code> as <code>v-type</code></p></div></div></div><div class="public anchor" id="var-get-value"><h3>get-value</h3><div class="usage"><code>(get-value this dbi-name k)</code><code>(get-value this dbi-name k k-type)</code><code>(get-value this dbi-name k k-type v-type)</code><code>(get-value this dbi-name k k-type v-type ignore-key?)</code></div><div class="doc"><div class="markdown"><p>Get kv pair of the specified key <code>k</code>, <code>k-type</code> and <code>v-type</code> can be <code>:data</code> (default), <code>:byte</code>, <code>:bytes</code>, <code>:attr</code>, <code>:datom</code> or <code>:long</code>;</p>
<p>If <code>ignore-key?</code> is true (default <code>true</code>), only return the value, otherwise return <code>[k v]</code>, where <code>v</code> is the value</p>
<p>Examples:</p>
<p>(get-value lmdb </p></div></div></div><div class="public anchor" id="var-open-dbi"><h3>open-dbi</h3><div class="usage"><code>(open-dbi this dbi-name)</code><code>(open-dbi this dbi-name key-size)</code><code>(open-dbi this dbi-name key-size val-size)</code><code>(open-dbi this dbi-name key-size val-size flags)</code></div><div class="doc"><div class="markdown"><p>Open a named dbi (i.e. sub-db) in the LMDB DB</p></div></div></div><div class="public anchor" id="var-range-filter"><h3>range-filter</h3><div class="usage"><code>(range-filter this dbi-name pred k-range)</code><code>(range-filter this dbi-name pred k-range k-type)</code><code>(range-filter this dbi-name pred k-range k-type v-type)</code><code>(range-filter this dbi-name pred k-range k-type v-type ignore-key?)</code></div><div class="doc"><div class="markdown"><p>Return a seq of kv pair in the specified key range, for only those return true value for <code>(pred x)</code>, where <code>pred</code> is a function, and <code>x</code> is an <code>IMapEntry</code>;</p>
<p><code>k-range</code> is a vector <code>[range-type k1 k2]</code>, <code>range-type</code> can be one of <code>:all</code>, <code>:at-least</code>, <code>:at-most</code>, <code>:closed</code>, <code>:closed-open</code>, <code>:greater-than</code>, <code>:less-than</code>, <code>:open</code>, <code>:open-closed</code>, plus backward variants that put a <code>-back</code> suffix to each of the above, e.g. <code>:all-back</code>;</p>
<p><code>k-type</code> and <code>v-type</code> indicate the data type, and they can be <code>:data</code> (default), <code>:long</code>, <code>:byte</code>, <code>:bytes</code>, <code>:datom</code>, or <code>:attr</code>;</p>
<p>Only the value will be returned if <code>ignore-key?</code> is <code>true</code>; If value is to be ignored, put <code>:ignore</code> as <code>v-type</code></p></div></div></div><div class="public anchor" id="var-transact"><h3>transact</h3><div class="usage"><code>(transact this txs)</code></div><div class="doc"><div class="markdown"><p>Update DB, insert or delete key value pairs.</p>
<p>txs is a seq of <code>[op dbi-name k v k-type v-type put-flags]</code>  when <code>op</code> is <code>:put</code>, for insertion of a key value pair <code>k</code> and <code>v</code>;  or <code>[op dbi-name k k-type]</code>when <code>op</code> is <code>:del</code> for deletion of key <code>k</code>;</p>
<p><code>dbi-name</code> is the name of the DBI to be transacted, a string.</p>
<p><code>k-type</code>, <code>v-type</code> and <code>put-flags</code> are optional.</p>
<p><code>k-type</code> indicates the type of <code>k</code>, and it can be one of <code>:data</code> (default), <code>:long</code>, <code>:byte</code>, <code>:bytes</code>, <code>:datom</code>, <code>:attr</code> or one of the index types <code>:eav</code>, <code>:aev</code>, <code>:ave</code>, or <code>:vae</code></p>
<p><code>v-type</code> indicates the type of <code>v</code> can be one of <code>:data</code> (default), <code>:long</code>, <code>:byte</code>, <code>:bytes</code>, <code>:datom</code>, or <code>attr</code></p>
<p><code>put-flags</code> is a vector of <a href="https://www.javadoc.io/doc/org.lmdbjava/lmdbjava/latest/org/lmdbjava/PutFlags.html">LMDB put flags</a>.</p>
<p>Example:</p>
<p>(transact lmdb  [ [:put </p></div></div></div></div></div><div class="src-link"><a href="https://github.com/juji-io/datalevin/blob/master/src/datalevin/lmdb.clj#L192">view source</a></div></div><div class="public anchor" id="var-open-lmdb"><h3>open-lmdb</h3><div class="usage"><code>(open-lmdb dir)</code><code>(open-lmdb dir size flags)</code></div><div class="doc"><div class="markdown"><p>Open an LMDB database. <code>dir</code> is a string path where the data are to be stored. <code>size</code> is the initial DB size in MB. <code>flags</code> are <a href="https://www.javadoc.io/doc/org.lmdbjava/lmdbjava/latest/index.html">LMDB EnvFlags</a>.</p></div></div><div class="src-link"><a href="https://github.com/juji-io/datalevin/blob/master/src/datalevin/lmdb.clj#L558">view source</a></div></div></div></body></html>